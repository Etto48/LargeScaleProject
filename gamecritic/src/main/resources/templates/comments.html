<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" data-bs-theme="dark">
    <head>
        <meta th:replace="~{fragments/general.html :: head}"/>
        <title>GameCritic - Review - Comments</title>
        <link rel="stylesheet" href="/css/comments.css">
    </head>
    <body class="d-flex flex-column h-100">
        <header th:replace="~{fragments/general.html :: header}"></header>
        <div th:replace="~{fragments/score.html :: score_bg(${review.score})}"></div>
        <main id="main" class="container d-flex flex-column card shadow py-2 my-5">
            <script id="comment-template" type="text/template">
                <div class="ms-2 my-2 me-0 d-flex flex-column" id="comment-{{comment.id}}">
                    <div class="d-flex flex-column comment-body p-2 mb-3">
                        <div class="d-flex flex-row">
                            <img class="rounded-circle me-2 my-auto" src="{{img}}" alt="User Image" style="width: 25px; height: 25px">
                            <a class="fs-6 fw-bold my-auto text-light" href="{{url}}">{{comment.author}}</a>
                        </div>
                        <div class="d-flex flex-row">
                            <span class="my-2">{{comment.quote}}</span>
                            <button class="btn btn-dark respond-button align-self-end ms-auto" onclick="openNewComment({{comment.id}});">
                                <i class="bi bi-chat-fill"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </script>
            <script id="subcomment-template" type="text/template">
                <div class="d-flex d-row subcomment-container">
                    <div class="vr me-2 rounded" style="width: 3px"></div>
                    <div class="d-flex flex-column subcomment-list" style="width: 100%;">
                    </div>
                </div>
            </script>
            <div th:replace="~{fragments/review.html :: full_review(${review})}"></div>
            <div th:replace="~{fragments/comment.html :: create_new(${review})}"></div>
            <button class="btn btn-dark respond-button w-100" onclick="openNewComment(null);" th:if="${user != null}">
                <i class="bi bi-chat-fill"></i>
            </button>
            <div th:each="comment : ${comments}">
                <div th:replace="~{fragments/comment.html :: comment(${comment})}"></div>
            </div>
        </main>
        <footer th:replace="~{fragments/general.html :: footer}"></footer>
    </body>
</html>